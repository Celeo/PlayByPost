{% extends 'base.jinja2' %}

{% block body %}

<div class="container">
  <h1>Register</h1>
  <br>
  <form action="{{ url_for('base.profile_register') }}" method="POST" id="form-app">
    <div class="form-group">
      <label for="email">Email</label>
      <input type="text" :class="{'form-control': true, 'is-valid': valid_email, 'is-invalid': !valid_email}" name="email" placeholder="your_address@somewhere.com" v-model="email" required>
    </div>
    <div class="form-group">
      <label for="password">Password (at least 5 characters)</label>
      <input type="password" :class="{'form-control': true, 'is-valid': valid_password, 'is-invalid': !valid_password}" name="password" placeholder="password" v-model="password" required>
    </div>
    <button type="submit" class="btn btn-primary" :disabled="!valid_input">Register</button>
  </form>
</div>

<script>
  $(document).ready(function() {
    new window.Vue({
      el: '#form-app',
      data: {
        email: '',
        password: ''
      },
      computed: {
        valid_email() {
          return /.+@(?:.+){2,}\.(?:.+){2,}/.test(this.email)
        },
        valid_password() {
          return this.password.length > 5
        },
        valid_input() {
          return this.valid_email && this.valid_password
        }
      }
    })
  })
</script>

{% endblock %}
